<!-- top bar -->
<div class="w-full flex flex-row items-center justify-between py-3">

  <span class="text-4xl font-medium">{{ 'AppTitle' | transloco }}</span>

  <div class="flex flex-row space-x-5 items-center justify-center">

    <div *ngIf="currentUser$ | async as user ; else noUser" class="flex pt-1 rounded-full border-2 border-black cursor-pointer hover:shadow-lg hover:shadow-gray-300">

      <button class="w-fit h-fit" [matMenuTriggerFor]="menu">
        <svg class="w-14 h-14 rounded-full" viewBox="0 0 24 24" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" fill="#000000">
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><defs><style>.cls-1{fill:none;stroke:#020202;stroke-miterlimit:10;stroke-width:1.91px;}</style></defs><circle class="cls-1" cx="12" cy="7.25" r="5.73"></circle><path class="cls-1" d="M1.5,23.48l.37-2.05A10.3,10.3,0,0,1,12,13h0a10.3,10.3,0,0,1,10.13,8.45l.37,2.05"></path></g>
        </svg>
      </button>
      <mat-menu class="w-96" #menu="matMenu">
        <div class="flex flex-col space-y-5 text-xl py-5 pl-3">
          <span>{{ 'Name' | transloco }} : {{ user.displayName }}</span>
          <span>{{ 'Email' | transloco }} : {{ user.email }}</span>
        </div>
      </mat-menu>

    </div>

    <button *ngIf="currentUser$ | async as user ;" mat-raised-button color="primary" (click)="logout()">Logout</button>

    <button class="w-fit h-fit" [matMenuTriggerFor]="LangMenu">
      <svg class="w-10 h-10" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css">  .st0{fill:#000000;}  </style> <g> <path class="st0" d="M463.203,105.688c-3.047-4.25-6.234-8.406-9.609-12.484C406.641,36.313,335.531,0,256,0 C176.484,0,105.359,36.313,58.406,93.203c-3.375,4.078-6.563,8.234-9.594,12.484C18.078,147.922,0,199.844,0,256 c0,56.313,18.156,108.484,49.031,150.719c3.125,4.328,6.406,8.563,9.844,12.656C105.844,475.922,176.719,512,256,512 c79.688,0,150.813-36.406,197.75-93.438c3.453-4.078,6.734-8.313,9.781-12.641C494.078,363.766,512,312,512,256 C512,199.844,493.922,147.922,463.203,105.688z M471.688,247.969H385.75c-0.625-32.563-5.031-63.438-12.5-91.219 c21.156-7.219,40.594-16.359,57.781-27.063C455.328,163.156,470.047,203.938,471.688,247.969z M263.984,41.906 c37.375,5.188,70.438,46.109,89.297,104.281c-27.469,7.828-57.594,12.406-89.297,13.094V41.906z M247.984,41.906v117.375 c-31.703-0.688-61.828-5.266-89.297-13.094C177.547,88.016,210.609,47.094,247.984,41.906z M247.984,175.266v72.703H142.219 c0.625-30.766,4.891-60.094,11.984-86.516C183.094,169.75,214.703,174.594,247.984,175.266z M247.984,263.969v72.703 c-33.234,0.797-64.828,5.734-93.703,14.094c-7.141-26.484-11.422-55.922-12.063-86.797H247.984z M247.984,352.656v117.375 c-37.297-5.172-70.313-45.938-89.188-103.938C186.625,358.031,216.734,353.453,247.984,352.656z M263.984,470.031V352.625 c31.703,0.563,61.859,5.094,89.359,12.875C334.5,423.813,301.406,464.844,263.984,470.031z M263.984,336.625v-72.656H369.75 c-0.625,30.625-4.859,59.859-11.891,86.188C328.938,341.938,297.281,337.188,263.984,336.625z M263.984,247.969v-72.703 c33.281-0.672,64.891-5.5,93.797-13.797c7.078,26.406,11.344,55.75,11.969,86.5H263.984z M421.281,117.203 c-15.656,9.547-33.344,17.703-52.563,24.266c-13.219-40.938-33.266-74-57.406-94.219 C354.906,58.797,393.156,83.609,421.281,117.203z M200.656,47.25c-24.141,20.234-44.188,53.281-57.406,94.203 c-19.188-6.563-36.891-14.703-52.531-24.25C118.844,83.625,157.063,58.813,200.656,47.25z M80.969,129.688 c17.188,10.703,36.609,19.828,57.75,27.063c-7.469,27.781-11.875,58.656-12.5,91.219H40.313 C41.953,203.938,56.688,163.156,80.969,129.688z M40.313,263.969h85.906c0.625,32.688,5.063,63.688,12.594,91.563 c-21.094,7.25-40.469,16.359-57.609,27.031C56.75,348.984,41.938,308.109,40.313,263.969z M91.125,395.203 c15.875-9.703,33.484-17.797,52.281-24.297c13.219,40.781,33.25,73.703,57.344,93.844 C157.344,453.25,119.219,428.594,91.125,395.203z M311.219,464.75c24.25-20.25,44.359-53.438,57.578-94.547 c19.281,6.547,37.047,14.719,52.734,24.281C393.313,428.234,354.938,453.156,311.219,464.75z M431.359,381.922 c-17.266-10.734-36.781-19.859-58.016-27.063c7.406-27.703,11.781-58.453,12.406-90.891h85.938 C470.078,307.859,455.5,348.438,431.359,381.922z"></path> </g> </g></svg>
    </button>
    <mat-menu class="w-fit" #LangMenu="matMenu">
      <div class="flex flex-col space-y-5 text-xl py-5 pl-3">
        <button (click)="changeLang('en')">English</button>
        <button (click)="changeLang('ger')">German</button>
      </div>
    </mat-menu>

    <ng-template #noUser>
      <p class="text-red-600">No user is logged in.</p>
    </ng-template>

  </div>



</div>

<hr>

<div class="w-fit flex flex-row space-x-24 pt-10">

  <!-- section 1 (contacts table) -->
  <div class="w-fit h-fit flex flex-col space-y-10">

    <!-- title -->
    <span class="text-3xl">{{ 'ContactsTable' | transloco }}</span>

    <!-- start contacts table -->
    <div class="w-fit border-2 border-gray-400 rounded-2xl py-3">

      <div class="flex p-3 space-x-5">
        <button mat-fab extended color="primary" (click)="openDialog(false)">
          <span>{{ 'AddContact' | transloco }}</span>
          <mat-icon>add</mat-icon>
        </button>

        <input matInput color="primary" class="px-6 py-2 border-2 border-blue-900 rounded-full shadow-lg focus:shadow-xl" (input)="searchContacts($event)" placeholder="Search by name">

        <button mat-fab extended color="primary" (click)="generateContacts()">
          <span>{{ 'Generate' | transloco }}</span>
          <mat-icon>add_circle</mat-icon>
        </button>

      </div>

      <table class="w-full" mat-table [dataSource]="dataSource" class="mat-elevation-z0">

        <!-- id Column -->
        <ng-container class="w-fit" matColumnDef="id">
          <th class="text-2xl" mat-header-cell *matHeaderCellDef> {{ 'ID' | transloco }} </th>
          <td class="text-xl" mat-cell *matCellDef="let contact"> {{contact.id}} </td>
        </ng-container>

        <!-- name Column -->
        <ng-container class="w-fit" matColumnDef="name">
          <th class="text-2xl" mat-header-cell *matHeaderCellDef> {{ 'Name' | transloco }} </th>
          <td class="text-xl" mat-cell *matCellDef="let contact"> {{contact.name}} </td>
        </ng-container>

        <!-- email Column -->
        <ng-container class="w-fit" matColumnDef="email">
          <th class="text-2xl" mat-header-cell *matHeaderCellDef> {{ 'Email' | transloco }} </th>
          <td class="text-xl" mat-cell *matCellDef="let contact"> {{contact.email}} </td>
        </ng-container>

        <!-- phone Column -->
        <ng-container class="w-fit" matColumnDef="phone">
          <th class="text-2xl" mat-header-cell *matHeaderCellDef> {{ 'Phone' | transloco }} </th>
          <td class="text-xl" mat-cell *matCellDef="let contact"> {{contact.phone}} </td>
        </ng-container>

        <!-- action Column -->
        <ng-container class="w-fit" matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let contact">

            <!-- edit button -->
            <button mat-icon-button color="primary" (click)="openDialog(true,contact)">
              <mat-icon>edit</mat-icon>
            </button>

            <!-- delete button -->
            <button mat-icon-button color="primary" (click)="deleteContact(contact)">
              <mat-icon>delete</mat-icon>
            </button>

            <!-- view deltails button -->
            <button mat-icon-button color="primary" (click)="viewDetails(contact)" >
              <mat-icon>visibility</mat-icon>
            </button>

          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
    <!-- end contacts table -->

  </div>

  <!-- section 2 (contact details) -->
  <div *ngIf="showContactDetails" class="w-fit h-full flex">
    <app-contactDetails class="w-1/2" [contact]="viewContactDetails" (hideContactDetails)="hideDetails()"></app-contactDetails>
  </div>

</div>




